svg(version='1.1', baseProfile='full', viewBox='0 0 700 200', xmlns='http://www.w3.org/2000/svg', xmlns:xlink="http://www.w3.org/1999/xlink")
  defs
    style.
      text { font-family: 'Old Standard TT'; font-style: italic; }
    marker#Triangle(viewBox='0 0 10 10', refX=1, refY=5, markerWidth=4, markerHeight=4, orient='auto')
      path(d='M 0 0 L 10 5 L 0 10 z')
  line(x1=20, x2=680, y1=150, y2=150, stroke='black', stroke-width=4, marker-end='url(#Triangle)')
  - var slices = 10;
  - for (var i = 1; i < slices; i++) {
    line(x1=i*660/slices+20, x2=i*660/slices+20, y1=143, y2=157, stroke='black', stroke-width=2)
  - }
  text(x=350, y=30, font-size=24, text-anchor='middle') state' = simulate(state, action)
  text(x=85, y=190, font-size=36, text-anchor='middle') t
  text(x=615, y=190, font-size=36, text-anchor='middle') t'
  g
    text(x=0, y=-70, font-size=24, text-anchor='middle') initial state
      animate(attributeName='opacity', attributeType='XML', keyTimes='0;.1;.2;1', values='1;1;0;0', dur='10s', repeatCount='indefinite')
    text(x=0, y=-70, font-size=24, text-anchor='middle') apply effect
      animate(attributeName='opacity', attributeType='XML', keyTimes='0;.8;.9;1', values='0;0;1;1', dur='10s', repeatCount='indefinite')
    text(x=0, y=-70, font-size=24 text-anchor='middle') simulating motion
      animate(attributeName='opacity', attributeType='XML', keyTimes='0;.2;.3;.7;.8;1', values='0;0;1;1;0;0', dur='10s', repeatCount='indefinite')
    line(y1=-40, y2=-20, stroke-width=3, x1=0, x2=0, stroke='black', marker-end='url(#Triangle)')
    -
      var points = [];
      var times = [];
      var s2 = slices - 2;
      for (var i = 0; i < s2; i++) {
        points.push(i / s2);
        points.push(i / s2);
        times.push(i / s2 * 0.8);
        times.push((i + 0.5) / s2 * 0.8);
      }
      points.push(1, 1);
      times.push(0.8, 1);
    animateMotion(dur='10s', repeatCount='indefinite', rotate='auto', calcMode='linear', keyPoints=points.join(';'), keyTimes=times.join(';'), path='M 85 150 L 615 150')
